/* deleted a place type from the database */
/* input:  placeType
   output: return value is 20001 if place type does not exist,
           0 otherwise
*/
CREATE PROC delPlaceType
(
  @placeType       integer
)
AS
BEGIN
  
  DECLARE @lastError int

  BEGIN TRAN
    SELECT type
      FROM placeTypes
      WHERE type = @placeType
    IF @@rowCount = 0
    BEGIN
      /* place type not found */
      ROLLBACK TRAN
      RETURN 20001
    END
    
    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END

    DELETE placeTypes
    WHERE type = @placeType
    
    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END
    
  COMMIT TRAN

END
GO
