/* Clear from database all Persistent Places records and
   Shadow Places Records                       */
CREATE PROC clearSpecialPlaces
AS
BEGIN
  DECLARE @lastError int
  
  BEGIN TRAN
    DELETE shadowPlaces
    
    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END
    
    DELETE persistentPlaces
    
    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END
  COMMIT TRAN
END
GO
