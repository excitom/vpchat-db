/*
 * Return the account status of an account.
 *
 * input: accountID
 * to the vpplaces stored procedure.
 *
 * output: return value - 0 through 5 => the account status
 *                        20001 if unknown accountID
 */
CREATE PROC checkAccountStatus
(
  @accountID            userIdentifier
)
AS
BEGIN
  DECLARE @lastError int
  DECLARE @accountStatus int

  SELECT @accountStatus = accountStatus
  FROM userAccounts
  WHERE accountID = @accountID

  SELECT @lastError = @@error
  IF @lastError != 0
  BEGIN
    RETURN @lastError
  END

  IF @accountStatus IS NULL
  BEGIN
    RETURN 20001
  END

  RETURN @accountStatus
  
END
GO
GRANT EXECUTE ON checkAccountStatus TO vpplaces
GO
