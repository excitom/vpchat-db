/*
 * Delete the note for an account
 *
 * There is one of these notes per account. 
 */
CREATE PROC delAccountNote ( 
	@accountID	userIdentifier
)
AS
BEGIN
  DECLARE @lastError	int

  BEGIN TRAN
    IF EXISTS (SELECT accountID
	FROM accountNotes
      	WHERE accountID = @accountID)
    BEGIN
      DELETE accountNotes WHERE accountID = @accountID
    END
    ELSE BEGIN
      ROLLBACK TRAN
      RETURN 20001
    END

    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END

  COMMIT TRAN
END
GO
