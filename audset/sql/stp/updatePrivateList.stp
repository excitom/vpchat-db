/*
 * Update details for a private alert list
 *
 * Output: 0 = success
 *         20000 = unknown list
 */
CREATE PROC updatePrivateList ( 
	@notifyID	userIdentifier,
	@subheader	longName,
	@URL		UrlType,
	@unlisted	bit,
	@approvalRqd	bit,
	@adultContent	bit
)
AS
BEGIN
  DECLARE @lastError	int
  BEGIN TRAN
    UPDATE notifyLists SET subheader = @subheader WHERE notifyID = @notifyID
    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END

    UPDATE privateLists
      SET URL = @URL,
          unlisted = @unlisted,
          approvalRqd = @approvalRqd,
	  adultContent = @adultContent
      WHERE notifyID = @notifyID

    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END
  COMMIT TRAN
END
GO
GRANT EXECUTE ON updateNotifyList TO vpusr
GO
