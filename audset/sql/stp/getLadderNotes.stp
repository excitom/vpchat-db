/*
 * Get ladder note text
 *
 * Input: Ladder ID
 *
 * Output: 0 = success
 *         20000 = ladder not found
 */
CREATE PROC getLadderNotes ( 
	@notifyID	userIdentifier
)
AS
BEGIN
  DECLARE @lastError	int

  BEGIN TRAN

    IF NOT EXISTS( SELECT * FROM ladders WHERE notifyID = @notifyID)
    BEGIN
      ROLLBACK TRAN
      RETURN 20000
    END

    SELECT noteOrder, lastPost, sourceCode
      FROM ladderNotes
      WHERE notifyID = @notifyID
      ORDER BY lastPost ASC

    SELECT @lastError = @@error
    IF @lastError != 0
    BEGIN
      ROLLBACK TRAN
      RETURN @lastError
    END
            
  COMMIT TRAN
END
GO
